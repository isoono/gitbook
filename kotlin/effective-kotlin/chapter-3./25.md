# 아이템 25 : 공통 모듈을 추출해서 여러 플랫폼에서 재사용하라

기업은 일반적으로 둘 이상의 플랫폼을 대상으로 하는 제품을 만들기 원하며, 대부분 기업의 제품과 서비스는 여러 플랫폼에서 운영된다.

네트워크 호출을 통해 통신하는 클라이언트와 서버 애플리케이션을 생각해보자. 두 애플리케이션은 서로 소통하므로, 재사용할 수 있는 부분이 많을 것이다. 특히 비즈니스 로직 부분들은 거의 동일하기 때문에 소스 코드를 공유할 수 있다면, 큰 이득이 발생할 것이다.

## 풀스택 개발

많은 회사가 웹 개발을 기반으로 한다. 일반적으로 웹사이트를 제품으로 사용하며, 백엔드 애플리케이션이 필요하다. 웹사이트 개발에서는 자바스크립트가 많이 사용되고 있다. 백엔드에서 가장 인기 있는 언어는 자바이다.

두 언어는 굉장히 다르므로, 일반적으로 백엔드와 웹은 분리해서 개발한다. 하지만 상황은 변할 수 있다.

자바의 스프링 등의 프레임워크들을 모두 코틀린에서 사용할 수 있는 것 과 같이 코틀린은 자바의 대안이 되고 있다.

코틀린의 장점 중 하나는 코틀린이 자바스크립트로 컴파일 될 수 있다는 것이다. 많은 코틀린/JS 라이브러리가 있으며, 코틀린을 활용해 다양한 웹 애플리케이션을 만들 수 있다.리액트 프레임워크와 코틀린/JS를 함께 사용해서 웹 프론트엔드를 만들 수도 있다.

즉, 웹 백엔드와 프론트엔드를 모두 코틀린으로 만들 수 있다는 것이다.이는 서로 코드를 공유할 수도 있다는 의미로, 공통 코드, API 엔드포인트 정의, 추상화 등을 재사용할 수 있다.

![Screen Shot 2022-06-12 at 3.20.00 PM.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4dd01f08-639a-4dc3-a637-b7e1d32f11e5/Screen\_Shot\_2022-06-12\_at\_3.20.00\_PM.png)

## 모바일 개발

이런 기능은 모바일 세계에서 훨씬 더 유용하다.

일반적으로 안드로이드 애플리케이션과 iOS 애플리케이션은 거의 대부분 동일한 동작을 하고, 내부적으로 비슷한 로직을 사용하지만, 다른 언어와 도구를 사용해서 따로 개발해야 한다.

코틀린의 멀티 플랫폼 기능을 활용하면, 로직을 한 번만 구현하고, 두 플랫폼에서 이를 재사용할 수 있다. 공통 모듈을 만들고, 여기에 다양한 비즈니스 로직을 구현하면 된다. 이때 비즈니스 로직은 프레임워크와 플랫폼에 종속되지 않고, 독립적이어야 한다(클린 아키텍처). 이러한 공통 로직은 처음부터 코틀린으로 직접 만들거나, 다른 공통 모듈을 활용해서 만들 수 있다. 만들기만 하면, 여러 플랫폼에서 사용할 수 있다.

![Screen Shot 2022-06-12 at 3.23.56 PM.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5782eaba-a242-4421-b26b-8a72e284fc59/Screen\_Shot\_2022-06-12\_at\_3.23.56\_PM.png)

## 라이브러리

공통 모듈을 정의할 수 있다는 것은 라이브러리에 있어서 강력한 도구이다. 특히 플랫폼에 크게 의존하지 않는다는 점은 공통 모듈을 JVM, 자바스크립트, 네이티브 환경에서 작동하는 모든 언어(자바, 스칼라, 자바스크립트, 커피스크립트, 타입스크립트, C, Objecttive-C, 스위프트, 파이썬, C#)에서 활용할 수 있다는 의미이다.

## 함께 사용하기

코틀린을 사용하면 널리 사용되는 대부분의 장치와 플랫폼을 대상으로 개발할 수 있으며, 원하는 코드들을 재사용할 수 있다.

다음은 코틀린으로 작성할 수 있는 것들의 예이다.

* 코틀린/JVM을 사용한 백엔드 개발 - 스프링, Ktor 등
* 코틀린/JS를 사용한 웹사이트 개발 - 리액트 등
* 코틀린/JVM을 사용한 안드로이드 개발 - 안드로이드 SDK 등
* 코틀린/네이티브를 통해 Objective-C/스위프트로 iOS 프레임워크 개발
* 코틀린/JVM을 사용한 데스크톱 개발 - TornadoFX 등
* 코틀린/네이티브를 사용한 라즈베리파이, 리눅스, macOS 프로그램 개발

![Screen Shot 2022-06-12 at 3.28.22 PM.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ccd8960a-f980-4cb5-80c0-165b15d345f2/Screen\_Shot\_2022-06-12\_at\_3.28.22\_PM.png)

수많은 개발자가 코드를 안전하고 효율적으로 재사용할 수 있게 하는 코드 구성 방법을 계속 고안하고 있다. 지금까지 설명한 접근 방법도 이러한 코드 구성 방법의 예이다.

공통 모듈을 사용하면 여러 플랫폼에서 코드를 재사용할 수 있다. 따라서 이러한 접근방법은 코드를 한 번만 작성해서 공통 논리 또는 공통 알고리즘을 재사용할 수 있게 해주는 강력한 도구라고 할 수 있다.
